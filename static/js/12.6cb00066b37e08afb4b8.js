webpackJsonp([12],{"/pqJ":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});e("oFuF");var i=e("IcnI"),o=(e("7+uW"),e("qoVm"),i.a.state.contractPath),n=e("q+Vb")("./deployments."+o+".json"),a=e("tBpT"),r={data:function(){return{txs:{},pixelContract:null,voteContract:null,mynfts:[],joinVoteNft:null,joinVoteVisible:!1,nftCards:[],inputTopic:"",proposal:{},loadings:{}}},beforeMount:function(){var t=[];for(var s in a.nfts){var e=a.nfts[s];105!=e.id&&t.push({name:e.name.zh,value:e.id})}this.nftCards=t},mounted:function(){this.initContract()},computed:{web3:function(){return this.$store.state.web3}},watch:{web3:function(t,s){this.initContract()}},methods:{initContract:function(){if(this.web3&&this.web3.web3Instance&&!this.pixelContract){var t=this.web3.web3Instance();this.pixelAddress=n.Pixel.address,this.pixelContract=new t.eth.Contract(n.Pixel.abi,n.Pixel.address,{from:this.web3.coinbase}),this.getInfo()}},getInfo:function(){this.getCurProposal(),this.getMyWorks()},getMyWorks:function(){this.checkStateAlive("pixelWorks")},getMyPixelWorks:function(){var t=this;this.pixelContract.methods.balanceOf(this.web3.coinbase).call({from:this.$store.state.contractFrom}).then(function(s){t.myNftBalance=s,console.log("myNftBalance balanceOf",s),0!=s&&t.pixelContract.methods.tokensOf(t.web3.coinbase,0,s).call({from:t.$store.state.contractFrom}).then(function(s){var e=[];console.log("tokensOf",s),s.length>0&&t.pixelContract.methods.getPixelInfos(s).call({from:t.$store.state.contractFrom}).then(function(s){console.log("token infos:",s),s.forEach(function(t){var s={id:t[0],name:t[1],url:t[2],mintdate:t[3]};e.push(s)}),t.mynfts=e,t.$store.commit("setPixelWorks",e),console.log(t.$store.state.pixelWorks)})})})},getCurProposal:function(){},toUTF8Array:function(t){for(var s=[],e=0;e<t.length;e++){var i=t.charCodeAt(e);i<128?s.push(i):i<2048?s.push(192|i>>6,128|63&i):i<55296||i>=57344?s.push(224|i>>12,128|i>>6&63,128|63&i):(e++,i=65536+((1023&i)<<10|1023&t.charCodeAt(e)),s.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return s},utf8to16:function(t){var s,e,i,o,n,a;for(s="",i=t.length,e=0;e<i;)switch((o=t.charCodeAt(e++))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:s+=t.charAt(e-1);break;case 12:case 13:n=t.charCodeAt(e++),s+=String.fromCharCode((31&o)<<6|63&n);break;case 14:n=t.charCodeAt(e++),a=t.charCodeAt(e++),s+=String.fromCharCode((15&o)<<12|(63&n)<<6|(63&a)<<0)}return s},toWall:function(t){this.$message({message:"Coming Soon",type:"info",center:!0})},showWorksJoin:function(t){this.$message({message:"Coming Soon",type:"info",center:!0})},checkStateAlive:function(t){this.$store.state[t]?this.mynfts=this.$store.state[t]:this.getMyPixelWorks()}},beforeDestroy:function(){},filters:{}},c={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"pixel-container"},[i("div",{staticClass:"valid-container"},[i("div",{staticClass:"my-works"},[i("div",{staticClass:"part-title"},[i("div",{staticClass:"left-border"}),t._v(" "),i("div",{staticClass:"center-text"},[t._v(t._s(t.$t("pixel.myworks")))])]),t._v(" "),i("div",{staticClass:"works-list"},[t._l(t.mynfts,function(s,e){return i("div",{key:e,staticClass:"work-item"},[i("div",{staticClass:"item-img",style:{backgroundImage:"url("+s.url+")"}}),t._v(" "),i("div",{staticClass:"item-info"},[i("span",[t._v(t._s(s.name))]),t._v(" "),i("span",[t._v("05-22 15:51")])]),t._v(" "),i("div",{staticClass:"item-btn"},[i("el-button",{staticClass:"gradient size",attrs:{round:"",loading:!1},on:{click:function(e){return t.showWorksJoin(s)}}},[t._v(t._s(t.$t("pixel.joinvote")))])],1)])}),t._v(" "),i("div",{staticClass:"work-item",staticStyle:{content:"''",height:"0"}})],2),t._v(" "),i("div",{staticClass:"bottom-tips"},[t._v(t._s(t.$t("pixel.gocreate")))])])]),t._v(" "),t.joinVoteNft?i("el-dialog",{attrs:{title:t.$t("pixel.publish"),visible:t.joinVoteVisible,center:"","modal-append-to-body":!1},on:{"update:visible":function(s){t.joinVoteVisible=s}}},[i("div",{staticClass:"join-box"},[i("div",{staticClass:"tips"},[i("span",{staticClass:"vote-title"},[t._v(t._s(t.proposal.name))])]),t._v(" "),i("div",{staticClass:"tips"},[0==t.proposal.status?i("span",[t._v(t._s(t.$t("pixel.beforeact"))+t._s(t.proposal.remainTimeStr))]):t._e(),t._v(" "),1==t.proposal.status?i("span",[t._v(t._s(t.$t("pixel.inact"))+t._s(t.proposal.remainTimeStr))]):t._e(),t._v(" "),2==t.proposal.status?i("span",[t._v(t._s(t.$t("pixel.beforevote"))+t._s(t.proposal.remainTimeStr))]):t._e(),t._v(" "),3==t.proposal.status?i("span",[t._v(t._s(t.$t("pixel.afteract")))]):t._e()]),t._v(" "),i("div",{staticClass:"topic-select"},[i("div",{staticClass:"label"},[t._v(t._s(t.$t("pixel.relatetopic")))]),t._v(" "),i("div",{staticClass:"input"},[i("el-input",{model:{value:t.inputTopic,callback:function(s){t.inputTopic=s},expression:"inputTopic"}})],1)]),t._v(" "),i("el-button",{staticClass:"gradient size",attrs:{round:"",loading:t.loadings["publish"+t.joinVoteNft.id]},on:{click:function(s){return t.toWall()}}},[t._v(t._s(t.$t("common.confirm")))]),t._v(" "),i("div",{staticClass:"close-btn"},[i("div",{staticClass:"icon",on:{click:function(s){t.joinVoteVisible=!1}}},[i("img",{attrs:{src:e("ScAH"),alt:"close"}})])])],1)]):t._e()],1)},staticRenderFns:[]};var l=e("VU/8")(r,c,!1,function(t){e("A5qt")},"data-v-06d7ffd0",null);s.default=l.exports},A5qt:function(t,s){}});
//# sourceMappingURL=12.6cb00066b37e08afb4b8.js.map